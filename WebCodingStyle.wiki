= Web Code Style Guidelines for the Seattle project =

This guide explains how to format code for the Seattle project that implements functionality exposed to the web. This guide should be seen as '''complementary''' to the general [CodingStyle code style guidelines], so please read that document thoroughly before you continue with the content below. Please let Ivan know if you have suggestions or feedback.

----
[[TOC(inline)]]
----

This guide contains general rules of thumbs, as well as instructions on how to format specific types of web files used by Seattle. This guide is expected to evolve, and should not be considered complete.

[[BR]]
== Code lay-out ==
----


[[BR]]
== Django applications ==
----

Django code is written in python, and falls under the purview of Seattle CodingStyle guidelines. However, Django is complex enough to warrant a few special cases.


[[BR]]
== Django models ==
----

Django model classes define the interface to the database. Additionally, these models '''document''' the database schema because Django automatically generates the database schema based on these models. Therefore is it critical to thoroughly document each class member and function in these classes. Here is an example:

In general, each class member will need at least a single commented line of explanation.

Each model class must define an __str__() method.  This method is used to generated a meaningful string representation of the model. This method is crucial for effective debugging of Django code.


[[BR]]
== Django templates ==
----

Django templates define a view on data generated by the Django application. Templates are written in a mix of HTML and Django templating language. Because there is no well-defined interface between templates and Django applications. This interface must be explicitly defined and maintained in comments maintained in the template file. It is important to maintain these comments in the template file because the template may be instantiated from different points in Django code, and may be used by different Django applications. All templates should include a header that defines all the variables expected by the template. Here is an example:

[[BR]]
== CSS and HTML web code ==
----

  * Prefer CSS to HTML tags. When both HTML and CSS offer ways to do the same thing, use CSS. CSS is easy to manage, change, and evolve. HTML is messy and terrible to maintain.

  * Relative positioning : in almost all cases you should use relative positioning on all Seattle web-pages. This means that your widths, heights, and other dimensions must be expressed in terms of percentages of their enclosing element.

  * Remember to separate logical portions of your CSS/HTML into sections/subsections. Use as many sections and comments as you need to achieve a granularity that will make it easier for someone else to understand your code.


[[BR]]
== CSS specifics ==
----

  * Use separate files for each aspect of the site. But do not use too many -- use good judgement. For example fonts, colors, and layout can be kept in separate files but do not do this for every tiny thing on the site.

  * Each CSS file should have a header that looks exactly like the following snippet:
{{{
#!C
/*****************************************************************
<File Name>
  documentation.css

<Started>
  December 15, 2008

<Author>
  ivan@cs.washington.edu
  Ivan Beschastnikh

<Purpose>
  Provides a printer-friendly documentation page

  Uses a hack to get IE6 fit paragraphs within div margins,
  and a hack to have IE7 display the print buttons correctly
  at the bottom of the page.

  As of January, 2008, this CSS file is being converted into a
  more generic style to provide printer-friendly support for other
  pages on the site.
*****************************************************************/
}}}

  * Your CSS file for a page should be structured in the order of XHTML elements in the page. If you have five divs in a row with ids "head", "navigation", "footer" then your CSS must include sections that are separated by comments that specify the section. In this comment, include any explanation that is necessary to understand the context around how the CSS is used on the page:

{{{
#!C
/***********************
* NAVIGATION
************************/
}}}


  * Main DIV must be used for all page content -- this will make it trivial to make complex changes later

  * Get all browsers on the same page. Different browsers render pages with different default settings. This can lead to numerous problems. For example, get rid of default margins/paddings across all browsers and your margins and paddings will render the same across all of them:

{{{
#!C
/* get rid of default margins/paddings */
* {
    padding: 0;
    margin:  0;
}
}}}

  * If you add browser-specific hacks then do so with lots of comments. Explain exactly what the problem is; provide a link to an article that documents the problem (e.g. [http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug IE box model bug]); and then explain where you found your solution and how it works. Remember that a cryptic hack is the worst kind of hack.

  * Group CSS properties in an alphabetical order. For example:
{{{
#!C
   body {  
       background: #fdfdfd;  
       color: #333;  
       font-size: 1em;  
       line-height: 1.4;  
       margin: 0;  
       padding: 0;  
   }  
}}}



[[BR]]
== HTML specifics ==
----

  * DOCTYPE must be properly declared

  * Head section needs to be minimal and include the following:
    * Title is set
    * Character set is included
    * Stylesheets are linked
    * Scripts are linked

  * Common content across pages must be included, not copied. Django provides simple templates to make this possible.

  * All pages must use proper ending tags -- do not ignore them, even if the page renders correctly.

  * Paragraphs must format text, use lists and labels if possible. Close all tags (e.g. <img .. />


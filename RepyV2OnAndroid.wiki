= Repy v2 on Android =

The setup for repy v2 on Android is similar to the manual setup for repy v1 [wiki:SeattleOnAndroid Seattle on Android], so it would be a good idea to look at the relevant parts of that.

First, you need to follow the instructions in the Setting up Python section. Basically, this amounts to installing [http://code.google.com/p/android-scripting/ Scripting Layer for Android] and Python for Android, then setting up the shell so python is actually usable. I found [https://github.com/jackpal/Android-Terminal-Emulator/wiki Jackpal's Android-Terminal-Emulator] worked well enough for running repy scripts, although using it with a better shell than Android's default sh would be something to consider. In any case, you'll need to tell the shell where it can find python. You can create a script that sets the necessary environmental variables and then set it to run when the terminal emulator starts by going into the preferences menu. You'll probably want something like this:
{{{
#!/system/bin/sh
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/data/data/com.googlecode.pythonforandroid/files/python/lib
export PYTHONPATH=/mnt/sdcard/com.googlecode.pythonforandroid/extras/python:/data/data/com.googlecode.pythonforandroid/files/python/lib/python2.6:/data/data/com.googlecode.pythonforandroid/files/python/lib/python2.6/lib-dynload
export PYTHONHOME=/data/data/com.googlecode.pythonforandroid/files/python
export TEMP=$TEMP:/mnt/sdcard/com.googlecode.pythonforandroid/extras/python/tmp/
export PATH=$PATH:/data/data/com.googlecode.pythonforandroid/files/python/bin
cd /mnt/sdcard/repy_v2
sh
}}}
This should be sufficient for getting python working and usable from a command line. To get a working installation of repy_v2, you need to checkout the repy_v2 branch from svn and run preparetest.py to get a directory with all the repy v2 files. Then, you need to patch nix_common_api.py by changing the line
{{{
libc = ctypes.CDLL(ctypes.util.find_library("c"))
}}}
to
{{{
libc = ctypes.CDLL("/system/lib/libc.so")
}}}
Copy the repy v2 files over to the Android phone along with any scripts you want to run, and you're good to go.
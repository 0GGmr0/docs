= Building Seattle On Android =

This document describes how do build the APK file for Seattle on Android.   This package contains the UI for Seattle that is used by the Android users.   However, the non-installer Seattle code (i.e. everything in the Linux installer) is downloaded at install time.   This is done to make crediting users for donations work smoothly.

[[TOC(inline)]]

[[BR]]
== Getting the SDK ==
----

To build the APK file, you must first download the Android SDK.   It is recommended you install every version of Android > 2.1 (API > 7) because Seattle runs on all of these platforms.   

To do the installation, download and unzip the file.   On some platforms, you then need to run tools/android to do the actual installation and download.


[[BR]]
== Getting Seattle On Android Ready To Build ==
----

The APK source for Seattle On Android is located in SVN under {{{trunk/dist/android/SeattleOnAndroid}}}.   You will need to create a {{{local.properties}}} file in this directory which refers to your SDK install location.   The contents of this file will look something like this, be sure to replace the sdk.dir with the appropriate one for your system:
{{{ 
target=android-7
sdk.dir=/Users/justincappos/android-sdk-macosx/ 
}}}

'''Do not use '~' characters as ant does not seem to support them well'''

Now you need to update the project so that it is ready to build.   From the SeattleOnAndroid directory, do:

{{{
android update project --name SeattleOnAndroid --target android-7 --path . 
}}}

The target should match that in the file above.

Note that if android isn't in your path you will need to specify the full path for it.  


[[BR]]
== Building the APK ==
----

At this point, you should be able to build the APK by running {{{ant debug}}} from the {{{trunk/dist/android/SeattleOnAndroid}}} directory.   This will create a release that is signed with the debug key.

You can also do {{{ant release}}} to create a version of the APK that is ready for release, but is unsigned.


[[BR]]
== Testing the APK ==
----

You should build and test the APK on both virtual and real Android devices.   To create virtual devices, follow the instructions at: http://developer.android.com/tools/devices/index.html   
Once you've created a device, you should start it.    

Then to install the APK, open a terminal and go to the sdk/platform-tools/ directory.   From there, run {{{ ./adb devices}}} and you should see your device listed as running.   To install the test APK you built, run {{{ ./adb install path/to/your/apk}}}.   

Then on the emulated phone, enter the applications menu and you'll see a !SeattleOnAndroid icon.   Click on this to start the installation process.   Note: this will require you to also download and install Python.



[[BR]]
== Signing and Distributing the APK ==

See the following docs:

http://developer.android.com/tools/publishing/app-signing.html

http://developer.android.com/tools/publishing/preparing.html
= Installer Workflow =

This document describes the steps taken to build a working Seattle installer.  From initial setup to when a user downloads a installer.

[[TOC(inline)]]
== Overview ==
Seattle uses the [wiki:CustomInstallerBuilderTesting custom installer builder] to generate Seattle installers.  A unique installer is generated dynamically by the CIB every time a user clicks download. A Seattle Clearinghouse frontend specifies which custom installer to use in website/settings.py.

{{{
#!py
41 # The XML-RPC interface to the Custom Installer Builder.
42 SEATTLECLEARINGHOUSE_INSTALLER_BUILDER_XMLRPC = "https://seattlegeni.cs.washington.edu/custom_install/xmlrpc/"
}}}

Unless in the rare case a Clearinghouse instance is running it's own custom installer builder, SEATTLECLEARINGHOUSE_INSTALLER_BUILDER_XMLRPC should be set to the same value as in trunk (like above). 

Using the custom installer builder is the only way a Clearinghouse instance should generate installers.

The custom installer builder is a separate web application created using Django.  

== Base Installer ==
Base Installers are created by running dist/make_base_installers.py.  This program must be passed in a public and private key.  These keys are used to identify the custom installer builder that the installers are associated with.

Example of usage on command line:
{{{
#!sh
$ python ./Seattle/trunk/dist/make_base_installers.py a ./Seattle/trunk/ user.publickey user.privatekey ./Installers/
}}}



== Custom installer workflow ==
The custom installer creates a vesselinfo file that is used by the nodemanager upon installation. This vesselinfo file dictates how the vessels are created. A default vesselinfo file is provided, but if you would like more control over how the resources on your machine are split up between your different vessels, or would like to dedicate specific vessels to specific users, you may also do that through the custom installer builder.

A copy of the base installer is made for each user. The custom installer builder accepts a donation public key and creates a vesselinfo file. After this file is embedded into the installer, the installer is complete and may be distributed to users.

== Placeholder ==
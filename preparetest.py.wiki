
The purpose of this page is to explain the purpose and usage of `preparetest.py`

[[TOC(inline)]]
== Purpose ==
The purpose of `preparetest.py` is to initialize a directory with the required files to run Repy programs.

== History ==
`preparetest.py` was adapted from the bash script `preparetest`.

== Usage ==

{{{
python preparetest.py [-t] [-v] [-c] [-r] <target>
}}}

where `<target>` is the preexisting target directory that the files will be copied to.

== Operation explained ==
`preparetest.py` takes a target directory *which must exist*.   It removes all files in this directory and initializes it with all the files required to run Repy programs. It does this in a few steps:

 * It first deletes all contents of the target.
 * It then copies all of the required repy and python files.
 * It then calls `repypp.py` to process all of the mix files in the target.

== Options ==
`preparetest.py` supports additional arguments to initialize the target with other commonly needed files.

 * `-t` or `--testfiles` copies in all the files required to run the unit tests
 * `-v` or `--verbose` displays significantly more output on failure to process a mix file
 * `-c` or `--checkapi` copies the checkapi source files
 * `-r` or `--randomports` replaces the default ports of `12345`, `12346`, and `12347` with 3 random ports between `52000` and `53000`.

== Examples ==

=== Using preparetest to prepare and run the unit tests ===
{{{
user@vm:~/repyv2_co$ cd repy_v2/
user@vm:~/repyv2_co/repy_v2$ mkdir test
user@vm:~/repyv2_co/repy_v2$ python preparetest.py -t test
user@vm:~/repyv2_co/repy_v2$ cd test
user@vm:~/repyv2_co/repy_v2/test$ python utf.py -m repyv2api
}}}